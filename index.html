<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Scatter Plot with D3.js</title>
    <!-- Include D3.js library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
      .label {
        pointer-events: none;
      }
    </style>
  </head>
  <body>
    <h1>Scatter Plot with D3.js</h1>
    <div id="scatter-plot"></div>

    <script>
      // Define the dimensions of the SVG canvas
      const width = 600;
      const height = 400;

      // Create an SVG element
      const svg = d3
        .select('#scatter-plot')
        .append('svg')
        .attr('width', width)
        .attr('height', height);

      // Load data from a CSV file
      d3.csv('allCourses.csv').then(function (data) {
        // Convert x, y, and size values to numbers
        data.forEach(function (d) {
          d.x = +d.x;
          d.y = +d.y;
          d.size = +d.size;
        });

        // Define scales for x and y axes with the range from -120 to 120
        const xScale = d3.scaleLinear().domain([-120, 120]).range([0, width]);

        const yScale = d3.scaleLinear().domain([-120, 120]).range([height, 0]);

        // Create a color scale based on the number of data points
        const colorScale = d3
          .scaleOrdinal()
          .domain(d3.range(data.length))
          .range(d3.schemeCategory10);

        // Create circles for each data point, with size and color determined by the data
        svg
          .selectAll('circle')
          .data(data)
          .enter()
          .append('circle')
          .attr('cx', (d) => xScale(d.x))
          .attr('cy', (d) => yScale(d.y))
          .attr('r', (d) => d.size / 50) // Size of the circles based on the "size" column
          .attr('fill', (d, i) => colorScale(i)) // Color of the circles based on the data point index
          .on('mouseover', function (d) {
            // Show label when mouseover event occurs
            svg
              .append('text')
              .attr('class', 'label')
              .attr('x', xScale(d.x) + 10)
              .attr('y', yScale(d.y))
              .attr('font-size', '12px')
              .attr('fill', 'black')
              .text(d.name); // Adjusted to use the "name" column
          })
          .on('mouseout', function () {
            // Remove the label when mouseout event occurs
            svg.select('.label').remove();
          });
      });
    </script>
  </body>
</html>
